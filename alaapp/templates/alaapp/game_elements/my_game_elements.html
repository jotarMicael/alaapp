{% extends 'alaapp/base/base.html' %}
{% load static %}

{% load game_element_extras %}
{% block title %}
  Mis E-J
{% endblock %}

{% block content %}

<div class="card-deck">
  
    <label class="valid-feedback d-block">{% for message in messages %}{% if message.tags == 'success' %}*{{ message }}{% endif %}{% endfor %}</label>
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Mis misiones</h3>
      </div>

      <div class="card-body">
      <div class="table-responsive">
        <table id="table" class="table table-striped table-bordered table-hover">
          <thead class="table-primary" >
            <tr>
              <th style="width: 5px">#</th>
              <th>Nombre</th>
              <th>Proyecto</th>
              <th style="width: 10px">Progreso</th>
            </tr>
          </thead>
          <tbody>
            
            {% for challenge in challenges %}
            {% get_progress_user challenge request.session.id as progress %}
            <tr>
              
              <td class="table-success">{{ challenge.id }}</td>
              <td>{{ challenge.name }}</td>
              <td>{{ challenge.project.name }}</td>
            

              <td><span class="float-right badge bg-{% if progress < 25 %}danger {% elif  progress >= 25 and progress < 50 %}warning {% elif   progress >= 50 and progress < 100 %}info {% else %}success {% endif %}">{{ progress }}%</span></td>
            </tr>
            {% endfor %}
            <form id="send_challenge"  method="post" action="/asign_challenge/"   > {% csrf_token %}
            <input type="hidden" id="challenge_id" name="challenge_id" />
            </form>
          </tbody>
        </table>
      </div>
      </div>
    </div>
 
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Mis insignias</h3>
      </div>

      <div class="card-body">
        <div class="table-responsive">
          <table id='table2' class="table table-hover  table-bordered">
          <thead class="table-primary">
            <tr>
              <th style="width: 10px">#</th>
              <th>Nombre</th>
              <th>Proyecto</th>
              <th style="width: 10px">Progreso</th>
            </tr>
          </thead>
          <tbody>
            {% for badge in badges %}
            {% get_progress_user badge request.session.id as progress %}
            <tr >
              <td class="table-success">{{ badge.id }}</td>
              <td>{{ badge.name }}</td>
              <td>{{ badge.project.name }}</td>
            

              <td><span class="float-right badge bg-{% if progress < 25 %}danger {% elif  progress >= 25 and progress < 50 %}warning {% elif   progress >= 50 and progress < 100 %}info {% else %}success {% endif %}">{{ progress }}%</span></td>
            </tr>
            {% endfor %}
            <form  id="send_badge" method="post" action="/asign_badge/"   > {% csrf_token %}
              <input type="hidden" id="badge_id" name="badge_id" />
              </form>
          </tbody>
        </table>
      </div>
      
    </div>
  
</div>

      <!--<div class="card-footer clearfix">
        <ul class="pagination pagination-sm m-0 float-right">
          <li class="page-item">
            <a class="page-link" href="#">«</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">1</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">2</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">3</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">»</a>
          </li>
        </ul>
      </div> -->
    
  
{% endblock %}



{% block scripts %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.css">

<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.js"></script>
<script src="{% static 'dist/js/datatable_es.js' %}"></script>
<script>$(document).ready( function () {
  $('#table').DataTable({

    "language": lang

  });
  $('#table2').DataTable({

    "language": lang

  });
} ); </script>
<script src="{% static 'dist/js/sweetalert2.all.min.js' %}"></script>
<script src="{% static 'dist/js/showconfirmation.js' %}"></script>
{% endblock %}
